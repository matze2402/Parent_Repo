name: Copy updated OpenAPI file

# only run this workflow when the openapi file has changed on the master branch
on: 
  push:
    branches: 
      - master
    #paths:
      #- 'notehub/api/openapi.yaml'

jobs:
  copy_openapi_file_to_notehub_js: 
    runs-on: ubuntu-latest
    steps:
    # check out notehub project
    - name: Check out  project
      uses: actions/checkout@v3
    # check out notehub-js project using token generated in that project to successfully access it from inside the Notehub GitHub Action workflow
    - name: Check out Notehub JS project
      uses: actions/checkout@v3
      with:
        repository: Matze240/child_repo
        path: ./child_repo
        token: ${{ secrets.test }}
    # make a copy the openapi file from notehub project
    - name: Copy OpenAPI file
      run: bash ./.github/scripts/copy-openapi-file.sh
      env:
        DESTINATION_PATH: ./child_repo/
    # make a branch in notehub-js repo and push the copy of the openapi file there
    #- name: Push to notehub-js repo
      #run: bash ./.github/scripts/push-openapi-to-notehub-js.sh
      #env:
        #BRANCH: feat-openapi-update
